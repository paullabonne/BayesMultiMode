## Loading packages
```{r}
# roxygen2::roxygenize("BayesMultiMode") #not sure if needed

######## Run this line when adding new functions to the package + adding the function name into NAMESPACE
devtools::document("BayesMultiMode") #create rd files to export functions
#### Run this line to install the package after every modification
# devtools::install("BayesMultiMode")
# devtools::run_examples("BayesMultiMode")
# devtools::build_manual("BayesMultiMode")
# devtools::build("BayesMultiMode")
# devtools::check("BayesMultiMode")
# devtools::check_rhub("BayesMultiMode")
# rcmdcheck::rcmdcheck("BayesMultiMode")
# Default data analysis using BayesMultimode
library(BayesMultiMode)
# devtools::install_github("jumpingrivers/inteRgrate")
# inteRgrate::check_pkg("BayesMultiMode")
```

## rstan
```{r}
# https://cran.r-project.org/web/packages/rstantools/vignettes/minimal-rstan-package.html
roxygen2::roxygenize()
rstantools::rstan_config()

devtools::install()

devtools::check()

# on windows
# install.packages("example", lib="C:/Program Files/R/R-4.2.2/library")
```

#### Loading all functions for testing before installing
```{r, eval = FALSE}
devtools::load_all()
```

#### Testing / https://r-pkgs.org/testing-design.html
```{r}
library(usethis)
# use_r("MEM")    # creates and opens R/fixed_point.R
use_test("MEM") # creates and opens tests/testthat/test-fixed_point.R
```

```{r}
# 
# test_that("some long-running thing works", {
#   skip_on_cran()
#   # test code that can potentially take "a while" to run  
# })
# 
# # test second element of output
# 
# # if the test use mcmc estimation result we could do this :
# test_that("foofy() does this", {
#   useful_thing1 <- readRDS(test_path("fixtures", "useful_thing1.rds"))
#   expect_equal(foofy(useful_thing1, x = "this"), EXPECTED_FOOFY_OUTPUT)
# })
# 
# test_that("foofy() does that", {
#   useful_thing2 <- readRDS(test_path("fixtures", "useful_thing2.rds"))
#   expect_equal(foofy(useful_thing2, x = "that"), EXPECTED_FOOFY_OUTPUT)
# })

# # Objects or functions defined in a helper file are available to all of your tests. such as :
# new_useful_thing <- function() {
#   # your fiddly code to create a useful_thing goes here like create a dataset ?
# }

set.seed(1)
mu = c(0,10)
sigma = c(1,2)
nu = c(5,5)
p = c(0.2,0.2)

data = c(sn::rst(p[1]*100, mu[1], sigma[1], nu = nu[1]), sn::rst(p[2]*100, mu[2], sigma[2], nu = nu[2]))
params = c(theta = p, mu = mu, sigma = sigma, nu = nu)

modes = MEM(params, "student", data)
expect_equal(round(modes),  mu)
```

